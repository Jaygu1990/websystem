<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Flip Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f0f2f5;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        .card-grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 5px;
            padding: 5px;
        }
        
        .card {
            background: #4a6baf;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .card-front {
            background: white;
            transform: rotateY(0deg);
        }
        
        .card-back {
            background: #4a6baf;
            transform: rotateY(180deg);
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            background: #e0e5ec;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #4a6baf;
            color: white;
            cursor: pointer;
        }
        
        .counter {
            padding: 10px 20px;
            background: white;
            border-radius: 5px;
        }
        
        /* Hidden audio element */
        #background-music {
            position: absolute;
            left: -9999px;
        }
    </style>
</head>
<body>
    <!-- Game Board -->
    <div class="card-grid" id="card-grid"></div>
    <div class="controls">
        <button id="shuffle-btn">Shuffle</button>
        <div class="counter">Flipped: <span id="flip-count">0</span>/5</div>
        <button id="reset-btn">Reset</button>
    </div>

    <!-- Background Music (hidden) -->
    <audio id="background-music" loop>
        <source src="static/sounds/track.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Initialize background music
        const backgroundMusic = document.getElementById('background-music');
        backgroundMusic.volume = 0.3; // Set to 30% volume
        
        // Try to autoplay (will fail in most browsers without user interaction)
        document.addEventListener('click', function enableMusic() {
            backgroundMusic.play().catch(e => console.log("Autoplay prevented"));
            document.removeEventListener('click', enableMusic);
        }, { once: true });

        // Game Logic
document.addEventListener('DOMContentLoaded', () => {
    const cardGrid = document.getElementById('card-grid');
    const shuffleBtn = document.getElementById('shuffle-btn');
    const resetBtn = document.getElementById('reset-btn');
    const flipCount = document.getElementById('flip-count');
    
    let cards = [];
    let flippedCount = 0;
    const maxFlipped = 5;
    let isShuffled = false;
    
    // Card images (25 front images + 1 back image)
    const cardSymbols = Array.from({length: 25}, (_, i) => `static/images/card${i+1}.png`);
    const cardBackImage = 'static/images/question.png';
    
    function createCards() {
        cardGrid.innerHTML = '';
        cards = [];
        flippedCount = 0;
        flipCount.textContent = flippedCount;
        isShuffled = false;
        
        cardSymbols.forEach((symbol, index) => {
            const card = document.createElement('div');
            card.className = 'card'; // Start face up (no 'flipped' class)
            card.dataset.symbol = symbol;
            card.dataset.index = index;
            
            card.innerHTML = `
                <div class="card-face card-front">
                    <img src="${symbol}" alt="Card ${index+1}">
                </div>
                <div class="card-face card-back">
                    <img src="${cardBackImage}" alt="Card Back">
                </div>
            `;
            
            card.addEventListener('click', () => flipCard(card));
            cardGrid.appendChild(card);
            cards.push(card);
        });
    }
    
    function flipCard(card) {
        // Only allow flipping if game is shuffled and card is face down
        if (!isShuffled || card.classList.contains('flipped') || flippedCount >= maxFlipped) {
            return;
        }
        
        card.classList.add('flipped');
        flippedCount++;
        flipCount.textContent = flippedCount;
    }
    
    function resetCards() {
        // Flip all cards face up (remove 'flipped' class)
        cards.forEach(card => {
            card.classList.remove('flipped');
        });
        
        // Reset game state
        flippedCount = 0;
        flipCount.textContent = flippedCount;
        isShuffled = false;
    }
    
    function shuffleCards() {
        // Flip all cards face down (add 'flipped' class)
        cards.forEach(card => {
            card.classList.add('flipped');
        });
        
        // Shuffle card positions in the grid
        const cardArray = Array.from(cards);
        for (let i = cardArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            cardGrid.appendChild(cardArray[j]);
            cardArray[j] = cardArray[i];
        }
        cardGrid.appendChild(cardArray[0]);
        
        // Reset flip count
        flippedCount = 0;
        flipCount.textContent = flippedCount;
        isShuffled = true;
    }
    
    shuffleBtn.addEventListener('click', shuffleCards);
    resetBtn.addEventListener('click', resetCards);
    
    // Initialize the game with all cards face up
    createCards();

        });
    </script>
</body>
</html>